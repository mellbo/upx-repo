class WheelPicker{constructor(t,e){this.container=document.getElementById(t),this.values=e,this.currentY=0,this.velocity=0,this.animating=!1,this.itemHeight=40,this.minY=-(e.length-1)*this.itemHeight,this.maxY=0,this.render(),this.bindEvents()}render(){this.container.innerHTML='<div class="wheel-items"></div>',this.itemsEl=this.container.querySelector(".wheel-items"),this.values.forEach(function(t){const e=document.createElement("div");e.className="wheel-item",e.textContent=t.toString().padStart(2,"0"),this.itemsEl.appendChild(e)}.bind(this)),this.updateSelection(),this.itemsEl.style.transform="translateY("+this.currentY+"px)"}bindEvents(){let t=!1,e=0;const i=this;function n(i){t=!0,e=i.touches?i.touches[0].clientY:i.clientY,i.preventDefault()}function r(n){if(!t)return;const r=n.touches?n.touches[0].clientY:n.clientY;let s=r-e;i.currentY+=s,i.currentY>i.maxY&&(i.currentY=i.maxY+(i.currentY-i.maxY)/3),i.currentY<i.minY&&(i.currentY=i.minY+(i.currentY-i.minY)/3),i.itemsEl.style.transform="translateY("+i.currentY+"px)",i.velocity=s,e=r,i.updateSelection()}function s(){t=!1,i.startInertia()}this.container.addEventListener("mousedown",n),this.container.addEventListener("mousemove",r),this.container.addEventListener("mouseup",s),this.container.addEventListener("mouseleave",s),this.container.addEventListener("touchstart",n),this.container.addEventListener("touchmove",r),this.container.addEventListener("touchend",s)}startInertia(){if(this.animating)return;this.animating=!0;const t=this;requestAnimationFrame(function e(){if(Math.abs(t.velocity)<.1)return t.snapToItem(),void(t.animating=!1);t.currentY+=t.velocity,t.currentY>t.maxY&&(t.currentY=t.maxY,t.velocity=0),t.currentY<t.minY&&(t.currentY=t.minY,t.velocity=0),t.itemsEl.style.transform="translateY("+t.currentY+"px)",t.velocity*=.95,t.updateSelection(),requestAnimationFrame(e)})}snapToItem(){const t=Math.round(-this.currentY/this.itemHeight);this.currentY=-t*this.itemHeight,this.itemsEl.style.transform="translateY("+this.currentY+"px)",this.updateSelection()}updateSelection(){const t=Math.round(-this.currentY/this.itemHeight);Array.from(this.itemsEl.children).forEach(function(e,i){e.classList.toggle("selected",i===t)})}getSelected(){return this.values[Math.round(-this.currentY/this.itemHeight)]}setSelected(t){const e=this.values.indexOf(t);e>=0&&(this.currentY=-e*this.itemHeight,this.itemsEl.style.transform="translateY("+this.currentY+"px)",this.updateSelection())}}class HorizontalWheelPicker{constructor(t,e){this.container=document.getElementById(t),this.values=e,this.currentX=0,this.velocity=0,this.animating=!1,this.itemWidth=60,this.minX=-(e.length-1)*this.itemWidth,this.maxX=0,this.render(),this.bindEvents()}render(){this.container.innerHTML='<div class="wheel-items"></div>',this.itemsEl=this.container.querySelector(".wheel-items"),this.values.forEach(t=>{const e=document.createElement("div");e.className="wheel-item",e.textContent=t,this.itemsEl.appendChild(e)}),this.updateSelection(),this.itemsEl.style.transform="translateX("+this.currentX+"px)"}bindEvents(){let t=!1,e=0;const i=this;function n(i){t=!0,e=i.touches?i.touches[0].clientX:i.clientX,i.preventDefault()}function r(n){if(!t)return;const r=n.touches?n.touches[0].clientX:n.clientX;let s=r-e;i.currentX+=s,i.currentX>i.maxX&&(i.currentX=i.maxX+(i.currentX-i.maxX)/3),i.currentX<i.minX&&(i.currentX=i.minX+(i.currentX-i.minX)/3),i.itemsEl.style.transform="translateX("+i.currentX+"px)",i.velocity=s,e=r,i.updateSelection()}function s(){t=!1,i.startInertia()}this.container.addEventListener("mousedown",n),this.container.addEventListener("mousemove",r),this.container.addEventListener("mouseup",s),this.container.addEventListener("mouseleave",s),this.container.addEventListener("touchstart",n),this.container.addEventListener("touchmove",r),this.container.addEventListener("touchend",s)}startInertia(){if(this.animating)return;this.animating=!0;const t=this;requestAnimationFrame(function e(){if(Math.abs(t.velocity)<.1)return t.snapToItem(),void(t.animating=!1);t.currentX+=t.velocity,t.currentX>t.maxX&&(t.currentX=t.maxX,t.velocity=0),t.currentX<t.minX&&(t.currentX=t.minX,t.velocity=0),t.itemsEl.style.transform="translateX("+t.currentX+"px)",t.velocity*=.95,t.updateSelection(),requestAnimationFrame(e)})}snapToItem(){const t=Math.round(-this.currentX/this.itemWidth);this.currentX=-t*this.itemWidth,this.itemsEl.style.transform="translateX("+this.currentX+"px)",this.updateSelection()}updateSelection(){const t=Math.round(-this.currentX/this.itemWidth);Array.from(this.itemsEl.children).forEach(function(e,i){e.classList.toggle("selected",i===t)})}getSelected(){const t=this.values[Math.round(-this.currentX/this.itemWidth)];return parseFloat(t.toFixed(1))}setSelected(t){const e=this.values.indexOf(parseFloat(t.toFixed(1)));e>=0&&(this.currentX=-e*this.itemWidth,this.itemsEl.style.transform="translateX("+this.currentX+"px)",this.updateSelection())}}window.initTimePicker=function(){const t=Array.from({length:24},(t,e)=>e),e=Array.from({length:60},(t,e)=>e);window.hoursWheel=new WheelPicker("hoursWheel",t),window.minutesWheel=new WheelPicker("minutesWheel",e);const i=[];for(let t=12;t<=38;t+=.1)i.push(parseFloat(t.toFixed(1)));window.horizontalWheel=new HorizontalWheelPicker("horizontalWheel",i)},window.openTimePicker=function(t){const e=new Date;window.hoursWheel.setSelected(e.getHours()),window.minutesWheel.setSelected(e.getMinutes()),window.horizontalWheel&&void 0!==t&&window.horizontalWheel.setSelected(t),$("#timePickerModal").modal("show")},$("#timePickerOkBtn").on("click",function(){let t=window.hoursWheel.getSelected().toString().padStart(2,"0"),e=window.minutesWheel.getSelected().toString().padStart(2,"0"),i=window.horizontalWheel.getSelected().toString().padStart(2,"0");const n=t+":"+e;console.log("Ora selectată:",n,"Extra:",i),alert("Ai ales ora: "+n+" și valoarea extra: "+i),$("#timePickerModal").modal("hide")});